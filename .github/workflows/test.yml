name: HiesenKernel

on:
  push:
    branches:
      - Caps  # Adjust branch name as needed
      - main

jobs:
  build:
    runs-on: ubuntu-latest  # Specify the operating system you're using

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2  # This step checks out your repository

      - name: Install Dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y build-essential git wget bzip2 xz-utils unzip help2man libtool-bin nasm python2 python3 python-pip grub-common xorriso mtools  build-essential build-essential gcc-multilib g++-multilib build-essential bison flex libgmp3-dev libmpc-dev libmpfr-dev texinfo
          python2 -m pip install -r kernel/requirements.txt
          wget https://ftp.gnu.org/gnu/gcc/gcc-11.2.0/gcc-11.2.0.tar.gz
          tar -xzf gcc-11.2.0.tar.gz
          cd gcc-11.2.0
          ./configure --target=i686-elf --prefix="$HOME/opt/cross" --disable-nls --enable-languages=c,c++ --without-headers

          
      - name: Run Make Command
        run: |
          cd kernel
          make
          cd arch/x86-pc
          make
